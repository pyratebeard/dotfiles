#!/bin/sh

ptt_cmd=$(amixer set Capture toggle >/dev/null)

set_nocap() {
	/usr/bin/dunstctl close
	/usr/bin/notify-send -u 'normal' 'muted'
	/usr/bin/amixer set Capture nocap >/dev/null
}

set_cap() {
	/usr/bin/notify-send -u 'critical' 'unmuted'
	/usr/bin/amixer set Capture cap >/dev/null
}

case $(amixer get Capture | tail -n1 | awk '{print $NF}' | tr -d '[]') in
	off) set_nocap ;;
	on) set_cap ;;
esac
